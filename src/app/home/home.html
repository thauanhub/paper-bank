<div class="container">
  <main class="main-container">
      <section>
          <article class="main-top">
              <p class="main-top-saudacao">Ol√°{{ pb.nomeUsuario ? ', ' + pb.nomeUsuario : '' }}!</p>
              <p class="main-top-descricao">Seja bem vindo ao PaperBank!</p>
          </article>
      </section>

      <section class="main-container-content">
          <article class="main-container-content-saldo">
              <p>Saldo do PaperBank</p>
              <p *ngIf="pb.carregandoSaldo" style="opacity: 0.5; font-size: 1.5rem;">...</p>
              <p *ngIf="!pb.carregandoSaldo" id="valor-saldo">{{ pb.saldo | currency:'BRL' }}</p>
          </article>

          <article class="main-container-content-historico">
                <p>Hist√≥rico</p>
                <ul class="lista-transacoes">
                    <li *ngFor="let item of historico" class="item-transacao">
                        <div class="transacao-info">
                            <span class="transacao-tipo">{{ item.tipo }}</span>
                            <span class="transacao-data">{{ item.data | date:'dd/MM HH:mm' }}</span>
                        </div>
                        <div class="transacao-valor" 
                            [class.valor-entrada]="item.entrada" 
                            [class.valor-saida]="!item.entrada">
                            {{ item.entrada ? '+' : '-' }} 
                            {{ item.valor | currency:'BRL' }}
                        </div>
                    </li>
                    <li *ngIf="historico.length === 0" class="sem-transacoes">
                    Nenhuma transa√ß√£o recente.
                    </li>
                </ul>
            </article>
      </section>

      <section class="main-container-actions">
          <article class="main-container-actions-transacoes">
              <button (click)="abrirModalTransferencia()" id="btn-enviar">Enviar</button>
              <button (click)="abrirExtrato()" id="btn-extrato">Ver Extrato</button>
          </article>
      </section>
  </main>
</div>

<div class="modal-overlay" *ngIf="exibirModalTransferencia">
  <div class="modal-content">
      
      <div class="modal-header">
          <h3>üí∏ Transfer√™ncia PIX</h3>
          <p>Envie dinheiro em segundos.</p>
      </div>
      
      <div class="input-group">
          <label>Para quem?</label>
          <input type="email" [(ngModel)]="chavePixDestino" placeholder="Chave PIX (E-mail)">
      </div>

      <div class="input-group">
          <label>Qual valor?</label>
          <div class="input-money">
              <span>R$</span>
              <input type="number" [(ngModel)]="valorTransferencia" placeholder="0.00">
          </div>
      </div>
      
      <div class="input-group">
          <label>Confirme sua senha</label>
          <input type="password" [(ngModel)]="senhaTransacao" placeholder="Senha de login">
      </div>
      
      <div class="modal-botoes">
          <button class="btn-cancelar" (click)="fecharModalTransferencia()">Cancelar</button>
          
          <button class="btn-confirmar" 
                  (click)="confirmarTransferencia()"
                  [disabled]="carregando"
                  [style.opacity]="carregando ? '0.6' : '1'">
              {{ carregando ? 'Enviando...' : 'Confirmar PIX' }}
          </button>
      </div>
  </div>
</div>

<div class="modal-overlay" *ngIf="exibirModalEmprestimo">
  <div class="modal-content">
      <div class="modal-header">
          <h3>üí∞ Empr√©stimo</h3>
          <p>Cr√©dito r√°pido na sua conta.</p>
      </div>

      <div class="input-group">
          <label>Quanto deseja receber?</label>
          <div class="input-money">
              <span>R$</span>
              <input type="number" [(ngModel)]="valorEmprestimo" placeholder="0.00" min="0">
          </div>
      </div>

      <div class="modal-botoes">
          <button class="btn-cancelar" (click)="fecharModalEmprestimo()">Cancelar</button>
          <button class="btn-confirmar" (click)="confirmarEmprestimo()">Confirmar Envio</button>
      </div>
  </div>
</div>

<div class="modal-overlay" *ngIf="feedbackAberto">
    <div class="modal-content feedback-box" [class.erro-box]="feedbackTipo === 'erro'">
        
        <div class="feedback-icon">
            {{ feedbackTipo === 'sucesso' ? '‚úÖ' : '‚ùå' }}
        </div>

        <h3>{{ feedbackTipo === 'sucesso' ? 'Sucesso!' : 'Ops!' }}</h3>
        
        <p>{{ feedbackMensagem }}</p>

        <div class="modal-botoes centered">
            <button class="btn-confirmar" (click)="fecharFeedback()">Entendido</button>
        </div>
    </div>
</div>

<div class="modal-overlay" *ngIf="exibirModalExtrato">
    <div class="modal-content modal-extrato"> <div class="modal-header">
            <h3>üìú Extrato Completo</h3>
            <p>Hist√≥rico de todas as suas movimenta√ß√µes.</p>
        </div>

        <ul class="lista-transacoes lista-expandida">
            <li *ngFor="let item of historico" class="item-transacao">
                <div class="transacao-info">
                    <span class="transacao-tipo">{{ item.tipo }}</span>
                    <span class="transacao-data">{{ item.data | date:'dd/MM/yyyy HH:mm' }}</span>
                </div>
                <div class="transacao-valor" 
                    [class.valor-entrada]="item.entrada" 
                    [class.valor-saida]="!item.entrada">
                    {{ item.entrada ? '+' : '-' }} 
                    {{ item.valor | currency:'BRL' }}
                </div>
            </li>
            
            <li *ngIf="historico.length === 0" class="sem-transacoes">
                Nenhuma movimenta√ß√£o encontrada.
            </li>
        </ul>

        <div class="modal-botoes centered">
            <button class="btn-confirmar" (click)="fecharExtrato()">Fechar</button>
        </div>
    </div>
</div>